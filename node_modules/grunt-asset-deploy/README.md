# grunt-asset-deploy [![Build Status](http://api.screwdriver.corp.yahoo.com:4080/badge/1349/component/icon)](http://api.screwdriver.corp.yahoo.com:4080/badge/1349/component/target)

> Deploys assets to MObStor. This task given a directory location, will traverse all the files and folders, construct a URL from the options given and deploy them to MObStor. Outputting the full path URL of each asset deployed.


## Getting Started
This plugin requires Grunt `~0.4.0`

If you haven't used [Grunt](http://gruntjs.com/) before, be sure to check out the [Getting Started](http://gruntjs.com/getting-started) guide, as it explains how to create a [Gruntfile](http://gruntjs.com/sample-gruntfile) as well as install and use Grunt plugins. Once you're familiar with that process, you may install this plugin with this command:

```shell
ynpm install git+ssh://git@git.corp.yahoo.com:touchdown/grunt-asset-deploy.git --save-dev
```

Once the plugin has been installed, it may be enabled inside your Gruntfile with this line of JavaScript:

```js
grunt.loadNpmTasks('grunt-asset-deploy');
```

## The "asset_deploy" task

### Options

#### options.src
Type: `String`
Default value: `''`

The directory source location of your assets (required).

#### options.host
Type: `String`
Default value: `''`

Your MObstor instance hostname (required).

#### options.path
Type: `String`
Default value: `''`

The directory access location on MObstor for your files (required).

#### options.yca
Type: `String`
Default value: `''`

Your MObstor YCA certificate name (required).

#### options.headers
Type: `Object`
Default value: `''`

Key value object of custom headers to apply for each upload (optional).

#### options.maxAge
Type: `Integer`
Default value: `536112000`

Sets max-age for the object in MObStor in seconds (optional). You should not change this if you are a touchdown apps/applet.

#### options.force
Type: `boolean`
Default value: `false`

Will force all assets to be reuploaded (optional). You should not use this if you are a touchdown app/applet.


### CLI Params

#### dryrun
Type: `Boolean`
Default value: `false`

When enabled, will prevent files from being pushed.


### Examples

#### Example Config

```js
grunt.initConfig({
   asset_deploy: {
     options: {
       src: '/temp/',
       host: 'media.zenfs.com',
       path: '/foo/',
       yca: 'yahoo.mobstor.client.some.property',
       headers: {
         'Access-Control-Allow-Origin': '*',
         'Access-Control-Allow-Methods': 'GET'
       }
     },
     default: {}
   },
})
```

